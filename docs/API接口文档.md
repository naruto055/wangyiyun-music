# ç½‘æ˜“äº‘éŸ³ä¹ API æ¥å£æ–‡æ¡£

> åŸºäº Spring Boot çš„ç½‘æ˜“äº‘éŸ³ä¹åç«¯æœåŠ¡ç³»ç»Ÿ API æ–‡æ¡£
>
> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
> **ç”Ÿæˆæ—¶é—´**: 2026-01-26 00:04:51
> **åŸºç¡€è·¯å¾„**: http://localhost:8910

---

## ğŸ“‹ ç›®å½•

- [åŸºç¡€ä¿¡æ¯](#åŸºç¡€ä¿¡æ¯)
- [é€šç”¨å“åº”ç»“æ„](#é€šç”¨å“åº”ç»“æ„)
- [æ¥å£åˆ—è¡¨](#æ¥å£åˆ—è¡¨)
  - [éŸ³ä¹ç®¡ç†](#1-éŸ³ä¹ç®¡ç†)
  - [æ”¶è—ç®¡ç†](#2-æ”¶è—ç®¡ç†)
  - [æ’­æ”¾è®°å½•ç®¡ç†](#3-æ’­æ”¾è®°å½•ç®¡ç†)
- [æ•°æ®æ¨¡å‹](#æ•°æ®æ¨¡å‹)

---

## åŸºç¡€ä¿¡æ¯

### æœåŠ¡åœ°å€

- **å¼€å‘ç¯å¢ƒ**: http://localhost:8910
- **API æ–‡æ¡£ï¼ˆSwagger UIï¼‰**: http://localhost:8910/swagger-ui/index.html
- **OpenAPI JSON**: http://localhost:8910/v3/api-docs

### è¯·æ±‚è¯´æ˜

- **Content-Type**: application/json
- **å­—ç¬¦ç¼–ç **: UTF-8
- **è¯·æ±‚æ–¹æ³•**: GETã€POSTã€PUTã€DELETE

### å“åº”è¯´æ˜

æ‰€æœ‰æ¥å£è¿”å›ç»Ÿä¸€æ ¼å¼ï¼Œè¯¦è§ [é€šç”¨å“åº”ç»“æ„](#é€šç”¨å“åº”ç»“æ„)

---

## é€šç”¨å“åº”ç»“æ„

### Result<T> ç»Ÿä¸€å“åº”å¯¹è±¡

| å­—æ®µ | ç±»å‹ | æè¿° | ç¤ºä¾‹ |
|------|------|------|------|
| code | Integer | å“åº”ç ï¼Œ200 è¡¨ç¤ºæˆåŠŸ | 200 |
| message | String | å“åº”æ¶ˆæ¯ | "æ“ä½œæˆåŠŸ" |
| data | T | å“åº”æ•°æ®ï¼Œå…·ä½“ç±»å‹è§†æ¥å£è€Œå®š | {...} |

**æˆåŠŸå“åº”ç¤ºä¾‹**:

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": 1,
    "name": "ä¸ƒé‡Œé¦™"
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:

```json
{
  "code": 500,
  "message": "ç³»ç»Ÿé”™è¯¯",
  "data": null
}
```

---

## æ¥å£åˆ—è¡¨

### 1. éŸ³ä¹ç®¡ç†

**æ¨¡å—è·¯å¾„**: `/api/music`

#### 1.1 åˆ†é¡µæŸ¥è¯¢éŸ³ä¹åˆ—è¡¨

- **æ¥å£æè¿°**: æ”¯æŒæŒ‰åˆ†ç±»ã€æ ‡ç­¾ã€å…³é”®è¯ç­‰ï¿½ï¿½ï¿½ä»¶ç­›é€‰éŸ³ä¹
- **è¯·æ±‚æ–¹æ³•**: `GET`
- **è¯·æ±‚è·¯å¾„**: `/api/music/list`
- **è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | æè¿° | ç¤ºä¾‹ |
|--------|------|------|--------|------|------|
| pageNum | Integer | å¦ | 1 | é¡µç  | 1 |
| pageSize | Integer | å¦ | 10 | æ¯é¡µå¤§å° | 10 |
| categoryId | Long | å¦ | - | åˆ†ç±»ID | 1 |
| keyword | String | å¦ | - | å…³é”®è¯ï¼ˆæ­Œæ›²å/æ­Œæ‰‹åï¼‰ | "å‘¨æ°ä¼¦" |
| sortField | String | å¦ | create_time | æ’åºå­—æ®µ | "play_count" |
| sortOrder | String | å¦ | desc | æ’åºæ–¹å¼ï¼ˆasc/descï¼‰ | "desc" |

- **å“åº”æ•°æ®**: `Result<IPage<Music>>`
  - `data.records`: éŸ³ä¹åˆ—è¡¨
  - `data.total`: æ€»è®°å½•æ•°
  - `data.pages`: æ€»é¡µæ•°
  - `data.current`: å½“å‰é¡µç 
  - `data.size`: æ¯é¡µå¤§å°

**è¯·æ±‚ç¤ºä¾‹**:

```bash
GET /api/music/list?pageNum=1&pageSize=10&keyword=å‘¨æ°ä¼¦&sortField=play_count&sortOrder=desc
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "records": [
      {
        "id": 1,
        "name": "ä¸ƒé‡Œé¦™",
        "url": "https://music.example.com/1.mp3",
        "coverUrl": "https://cover.example.com/1.jpg",
        "duration": 299,
        "playCount": 1000000,
        "categoryId": 1,
        "createTime": "2026-01-01 10:00:00"
      }
    ],
    "total": 100,
    "pages": 10,
    "current": 1,
    "size": 10
  }
}
```

---

#### 1.2 è·å–éŸ³ä¹è¯¦æƒ…

- **æ¥å£æè¿°**: æ ¹æ®éŸ³ä¹IDæŸ¥è¯¢è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…å«æ­Œæ‰‹ã€ä¸“è¾‘ã€æ ‡ç­¾ç­‰å…³è”æ•°æ®
- **è¯·æ±‚æ–¹æ³•**: `GET`
- **è¯·æ±‚è·¯å¾„**: `/api/music/{id}`
- **è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | æè¿° | ç¤ºä¾‹ |
|--------|------|------|------|------|
| id | Long | æ˜¯ | éŸ³ä¹ID | 1 |

- **å“åº”æ•°æ®**: `Result<MusicDetailVO>`

**è¯·æ±‚ç¤ºä¾‹**:

```bash
GET /api/music/1
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": 1,
    "name": "ä¸ƒé‡Œé¦™",
    "url": "https://music.example.com/1.mp3",
    "coverUrl": "https://cover.example.com/1.jpg",
    "duration": 299,
    "playCount": 1000000,
    "categoryId": 1,
    "artists": [
      {
        "id": 1,
        "name": "å‘¨æ°ä¼¦",
        "avatarUrl": "https://artist.example.com/jay.jpg"
      }
    ],
    "tags": [
      {
        "id": 1,
        "name": "æµè¡Œ"
      }
    ]
  }
}
```

---

### 2. æ”¶è—ç®¡ç†

**æ¨¡å—è·¯å¾„**: `/api/favorite`

#### 2.1 æ”¶è—éŸ³ä¹

- **æ¥å£æè¿°**: å°†æŒ‡å®šéŸ³ä¹æ·»åŠ åˆ°ç”¨æˆ·çš„æ”¶è—åˆ—è¡¨
- **è¯·æ±‚æ–¹æ³•**: `POST`
- **è¯·æ±‚è·¯å¾„**: `/api/favorite/{musicId}`
- **è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | æè¿° | ç¤ºä¾‹ |
|--------|------|------|------|------|
| musicId | Long | æ˜¯ | éŸ³ä¹ID | 1 |

- **å“åº”æ•°æ®**: `Result<Void>`

**è¯·æ±‚ç¤ºä¾‹**:

```bash
POST /api/favorite/1
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": null
}
```

---

#### 2.2 å–æ¶ˆæ”¶è—

- **æ¥å£æè¿°**: ä»ç”¨æˆ·çš„æ”¶è—åˆ—è¡¨ä¸­ç§»é™¤æŒ‡å®šéŸ³ä¹
- **è¯·æ±‚æ–¹æ³•**: `DELETE`
- **è¯·æ±‚è·¯å¾„**: `/api/favorite/{musicId}`
- **è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | æè¿° | ç¤ºä¾‹ |
|--------|------|------|------|------|
| musicId | Long | æ˜¯ | éŸ³ä¹ID | 1 |

- **å“åº”æ•°æ®**: `Result<Void>`

**è¯·æ±‚ç¤ºä¾‹**:

```bash
DELETE /api/favorite/1
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": null
}
```

---

#### 2.3 æŸ¥è¯¢æ”¶è—åˆ—è¡¨

- **æ¥å£æè¿°**: åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·çš„éŸ³ä¹æ”¶è—åˆ—è¡¨
- **è¯·æ±‚æ–¹æ³•**: `GET`
- **è¯·æ±‚è·¯å¾„**: `/api/favorite/list`
- **è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | æè¿° | ç¤ºä¾‹ |
|--------|------|------|--------|------|------|
| pageNum | Integer | å¦ | 1 | é¡µç  | 1 |
| pageSize | Integer | å¦ | 10 | æ¯é¡µå¤§å° | 10 |

- **å“åº”æ•°æ®**: `Result<IPage<Favorite>>`

**è¯·æ±‚ç¤ºä¾‹**:

```bash
GET /api/favorite/list?pageNum=1&pageSize=10
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "records": [
      {
        "id": 1,
        "userId": 1,
        "musicId": 1,
        "createTime": "2026-01-01 10:00:00"
      }
    ],
    "total": 50,
    "pages": 5,
    "current": 1,
    "size": 10
  }
}
```

---

### 3. æ’­æ”¾è®°å½•ç®¡ç†

**æ¨¡å—è·¯å¾„**: `/api/play-record`

#### 3.1 è®°å½•æ’­æ”¾

- **æ¥å£æè¿°**: è®°å½•ç”¨æˆ·æ’­æ”¾éŸ³ä¹çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ’­æ”¾è¿›åº¦ã€æ’­æ”¾æ—¶é•¿ç­‰
- **è¯·æ±‚æ–¹æ³•**: `POST`
- **è¯·æ±‚è·¯å¾„**: `/api/play-record`
- **è¯·æ±‚å‚æ•°** (Request Body):

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | æè¿° | ç¤ºä¾‹ |
|------|------|------|--------|------|------|
| musicId | Long | æ˜¯ | - | éŸ³ä¹ID | 1 |
| playDuration | Integer | å¦ | - | æ’­æ”¾æ—¶é•¿ï¼ˆç§’ï¼‰ | 180 |
| playSource | String | å¦ | web | æ’­æ”¾æ¥æº | "web" |

**è¯·æ±‚ç¤ºä¾‹**:

```bash
POST /api/play-record
Content-Type: application/json

{
  "musicId": 1,
  "playDuration": 180,
  "playSource": "web"
}
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": null
}
```

---

#### 3.2 æŸ¥è¯¢æ’­æ”¾å†å²

- **æ¥å£æè¿°**: åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·çš„æ’­æ”¾å†å²è®°å½•
- **è¯·æ±‚æ–¹æ³•**: `GET`
- **è¯·æ±‚è·¯å¾„**: `/api/play-record/history`
- **è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | æè¿° | ç¤ºä¾‹ |
|--------|------|------|--------|------|------|
| pageNum | Integer | å¦ | 1 | é¡µç  | 1 |
| pageSize | Integer | å¦ | 10 | æ¯é¡µå¤§å° | 10 |

- **å“åº”æ•°æ®**: `Result<IPage<PlayRecord>>`

**è¯·æ±‚ç¤ºä¾‹**:

```bash
GET /api/play-record/history?pageNum=1&pageSize=10
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "records": [
      {
        "id": 1,
        "userId": 1,
        "musicId": 1,
        "playDuration": 180,
        "playSource": "web",
        "createTime": "2026-01-01 10:00:00"
      }
    ],
    "total": 200,
    "pages": 20,
    "current": 1,
    "size": 10
  }
}
```

---

## æ•°æ®æ¨¡å‹

### Music (éŸ³ä¹å®ä½“)

| å­—æ®µ | ç±»å‹ | æè¿° | ç¤ºä¾‹ |
|------|------|------|------|
| id | Long | éŸ³ä¹ID | 1 |
| name | String | éŸ³ä¹åç§° | "ä¸ƒé‡Œé¦™" |
| url | String | éŸ³ä¹æ–‡ä»¶URL | "https://music.example.com/1.mp3" |
| coverUrl | String | å°é¢å›¾ç‰‡URL | "https://cover.example.com/1.jpg" |
| duration | Integer | æ—¶é•¿ï¼ˆç§’ï¼‰ | 299 |
| playCount | Integer | æ’­æ”¾é‡ | 1000000 |
| categoryId | Long | åˆ†ç±»ID | 1 |
| createTime | DateTime | åˆ›å»ºæ—¶é—´ | "2026-01-01 10:00:00" |

### MusicDetailVO (éŸ³ä¹è¯¦æƒ…)

åŒ…å« Music çš„æ‰€æœ‰å­—æ®µï¼Œä»¥åŠï¼š

| å­—æ®µ | ç±»å‹ | æè¿° | ç¤ºä¾‹ |
|------|------|------|------|
| artists | List&lt;Artist&gt; | æ­Œæ‰‹åˆ—è¡¨ | [...] |
| tags | List&lt;Tag&gt; | æ ‡ç­¾åˆ—è¡¨ | [...] |

### Favorite (æ”¶è—)

| å­—æ®µ | ç±»å‹ | æè¿° | ç¤ºä¾‹ |
|------|------|------|------|
| id | Long | æ”¶è—ID | 1 |
| userId | Long | ç”¨æˆ·ID | 1 |
| musicId | Long | éŸ³ä¹ID | 1 |
| createTime | DateTime | æ”¶è—æ—¶é—´ | "2026-01-01 10:00:00" |

### PlayRecord (æ’­æ”¾è®°å½•)

| å­—æ®µ | ç±»å‹ | æè¿° | ç¤ºä¾‹ |
|------|------|------|------|
| id | Long | è®°å½•ID | 1 |
| userId | Long | ç”¨æˆ·ID | 1 |
| musicId | Long | éŸ³ä¹ID | 1 |
| playDuration | Integer | æ’­æ”¾æ—¶é•¿ï¼ˆç§’ï¼‰ | 180 |
| playSource | String | æ’­æ”¾æ¥æº | "web" |
| createTime | DateTime | åˆ›å»ºæ—¶é—´ | "2026-01-01 10:00:00" |

---

## é™„å½•

### A. çŠ¶æ€ç è¯´æ˜

| çŠ¶æ€ç  | æè¿° |
|--------|------|
| 200 | è¯·æ±‚æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªæˆæƒ |
| 403 | ç¦æ­¢è®¿é—® |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

### B. åˆ†é¡µè¯´æ˜

æ‰€æœ‰åˆ†é¡µæ¥å£ç»Ÿä¸€ä½¿ç”¨ MyBatis-Plus çš„ `IPage` å¯¹è±¡ï¼š

| å­—æ®µ | ç±»å‹ | æè¿° |
|------|------|------|
| records | List&lt;T&gt; | å½“å‰é¡µæ•°æ®åˆ—è¡¨ |
| total | Long | æ€»è®°å½•æ•° |
| pages | Long | æ€»é¡µæ•° |
| current | Long | å½“å‰é¡µç  |
| size | Long | æ¯é¡µå¤§å° |

### C. ç›¸å…³é“¾æ¥

- [Swagger UI åœ¨çº¿æ–‡æ¡£](http://localhost:8910/swagger-ui/index.html)
- [OpenAPI JSON è§„èŒƒ](http://localhost:8910/v3/api-docs)
- [é¡¹ç›® GitHub ä»“åº“](#) (å¾…æ·»åŠ )

---

**æ–‡æ¡£æ›´æ–°æ—¥å¿—**:

- **2026-01-26**: åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å« 7 ä¸ªåŸºç¡€æ¥å£æ–‡æ¡£

---

**ç»´æŠ¤è€…**: naruto
**è®¸å¯è¯**: Apache 2.0
