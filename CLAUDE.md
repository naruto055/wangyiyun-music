# ç½‘æ˜“äº‘éŸ³ä¹é¡¹ç›® (wangyiyun-music)

> ğŸµ åŸºäº Spring Boot çš„ç½‘æ˜“äº‘éŸ³ä¹åç«¯æœåŠ¡ç³»ç»Ÿ

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2026-01-30 00:01:24
**é¡¹ç›®ç‰ˆæœ¬**: 0.0.1-SNAPSHOT
**æŠ€æœ¯æ ˆ**: Spring Boot 3.1.0 + Java 17 + Maven + MySQL + MyBatis-Plus

---

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

### é¡¹ç›®æ„¿æ™¯
æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„ç½‘æ˜“äº‘éŸ³ä¹åç«¯æœåŠ¡ç³»ç»Ÿï¼Œæä¾›éŸ³ä¹æ’­æ”¾ã€æ­Œæ‰‹ç®¡ç†ã€ä¸“è¾‘ç®¡ç†ã€æ”¶è—äº’åŠ¨ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œé‡‡ç”¨ç°ä»£åŒ–çš„åˆ†å±‚æ¶æ„è®¾è®¡ã€‚

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **éŸ³ä¹ç®¡ç†æœåŠ¡**: æ­Œæ›²æŸ¥è¯¢ã€æ’­æ”¾URLè·å–ã€éŸ³ä¹åˆ—è¡¨ã€éŸ³ä¹è¯¦æƒ…
- âœ… **æ­Œæ‰‹ç®¡ç†æœåŠ¡**: æ­Œæ‰‹ä¿¡æ¯æŸ¥è¯¢ã€æ­Œæ‰‹ä½œå“åˆ—è¡¨
- âœ… **ä¸“è¾‘ç®¡ç†æœåŠ¡**: ä¸“è¾‘ä¿¡æ¯æŸ¥è¯¢ã€ä¸“è¾‘æ­Œæ›²åˆ—è¡¨
- âœ… **æ”¶è—ç®¡ç†æœåŠ¡**: ç”¨æˆ·æ”¶è—æ­Œæ›²ã€æ”¶è—åˆ—è¡¨ç®¡ç†
- âœ… **æ’­æ”¾è®°å½•æœåŠ¡**: æ’­æ”¾å†å²è®°å½•ã€æ’­æ”¾ç»Ÿè®¡
- âœ… **åˆ†ç±»æ ‡ç­¾æœåŠ¡**: éŸ³ä¹åˆ†ç±»ã€æ ‡ç­¾ç®¡ç†
- âœ… **éŸ³é¢‘èµ„æºæœåŠ¡**: éŸ³é¢‘æ–‡ä»¶URLæ˜ å°„ã€æ”¯æŒHTTP Rangeè¯·æ±‚

### æŠ€æœ¯é€‰å‹è¯´æ˜
- **æ¡†æ¶**: Spring Boot 3.1.0 - ç®€åŒ– Spring åº”ç”¨å¼€å‘ï¼Œæä¾›å¼€ç®±å³ç”¨çš„åŠŸèƒ½
- **è¯­è¨€**: Java 17 - ç°ä»£åŒ–çš„ Java ç‰¹æ€§ï¼Œæå‡å¼€å‘æ•ˆç‡
- **æ„å»ºå·¥å…·**: Maven - é¡¹ç›®ä¾èµ–ç®¡ç†å’Œæ„å»ºè‡ªåŠ¨åŒ–
- **æ•°æ®åº“**: MySQL - å…³ç³»å‹æ•°æ®åº“ï¼Œå­˜å‚¨æ ¸å¿ƒä¸šåŠ¡æ•°æ®
- **ORMæ¡†æ¶**: MyBatis-Plus 3.5.5 - å¼ºå¤§çš„ MyBatis å¢å¼ºå·¥å…·
- **è¿æ¥æ± **: Druid 1.2.21 - é˜¿é‡Œå·´å·´æ•°æ®åº“è¿æ¥æ± 
- **APIæ–‡æ¡£**: SpringDoc OpenAPI 2.3.0 - è‡ªåŠ¨ç”Ÿæˆ Swagger æ–‡æ¡£
- **å¼€å‘ç¯å¢ƒ**: IntelliJ IDEA (æ¨è)

### é¡¹ç›®çŠ¶æ€
- âœ… **å·²å®Œæˆ**: åŸºç¡€æ¡†æ¶æ­å»ºã€åˆ†å±‚æ¶æ„è®¾è®¡ã€æ ¸å¿ƒä¸šåŠ¡æ¨¡å—å¼€å‘
- âœ… **å·²å®Œæˆ**: ç»Ÿä¸€å“åº”å°è£…ã€å…¨å±€å¼‚å¸¸å¤„ç†ã€Swagger API æ–‡æ¡£
- âœ… **å·²å®Œæˆ**: éŸ³é¢‘èµ„æºURLæ˜ å°„åŠŸèƒ½
- ğŸš§ **è¿›è¡Œï¿½ï¿½ï¿½**: åŠŸèƒ½ä¼˜åŒ–ä¸æµ‹è¯•å®Œå–„
- ğŸ“… **å¾…å¼€å‘**: ç”¨æˆ·è®¤è¯æˆæƒã€ç¼“å­˜é›†æˆã€æ€§èƒ½ä¼˜åŒ–

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ç³»ç»Ÿæ¶æ„å›¾

```mermaid
graph TB
    subgraph "å®¢æˆ·ç«¯å±‚ Client Layer"
        Client[å‰ç«¯åº”ç”¨ / ç§»åŠ¨ç«¯]
    end

    subgraph "è¡¨ç°å±‚ Presentation Layer"
        APIController[RESTful API æ§åˆ¶å™¨<br/>10ä¸ªæ§åˆ¶å™¨]
        GlobalAdvice[å…¨å±€å“åº”å°è£…<br/>ç»Ÿä¸€è¿”å›æ ¼å¼]
    end

    subgraph "ä¸šåŠ¡å±‚ Business Layer"
        MusicService[éŸ³ä¹æœåŠ¡]
        ArtistService[æ­Œæ‰‹æœåŠ¡]
        AlbumService[ä¸“è¾‘æœåŠ¡]
        FavoriteService[æ”¶è—æœåŠ¡]
        AudioService[éŸ³é¢‘æœåŠ¡]
        ArtistNameService[æ­Œæ‰‹åç§°å¡«å……å…¬å…±æœåŠ¡]
    end

    subgraph "æŒä¹…å±‚ Persistence Layer"
        Mapper[MyBatis-Plus Mapper<br/>æ•°æ®è®¿é—®æ¥å£]
        Entity[å®ä½“ç±» Entity<br/>æ•°æ®åº“è¡¨æ˜ å°„]
    end

    subgraph "åŸºç¡€è®¾æ–½å±‚ Infrastructure Layer"
        MySQL[(MySQL æ•°æ®åº“<br/>wangyiyun_music)]
        ExceptionHandler[å…¨å±€å¼‚å¸¸å¤„ç†å™¨]
        Swagger[Swagger API æ–‡æ¡£]
    end

    Client -->|HTTPè¯·æ±‚| APIController
    APIController -->|è°ƒç”¨| GlobalAdvice
    GlobalAdvice -->|ä¸šåŠ¡å¤„ç†| MusicService
    GlobalAdvice -->|ä¸šåŠ¡å¤„ç†| ArtistService
    GlobalAdvice -->|ä¸šåŠ¡å¤„ç†| AlbumService
    GlobalAdvice -->|ä¸šåŠ¡å¤„ç†| FavoriteService
    GlobalAdvice -->|ä¸šåŠ¡å¤„ç†| AudioService
    MusicService -->|æ•°æ®è®¿é—®| Mapper
    ArtistService -->|æ•°æ®è®¿é—®| Mapper
    AlbumService -->|æ•°æ®è®¿é—®| Mapper
    FavoriteService -->|æ•°æ®è®¿é—®| Mapper
    AudioService -->|æ•°æ®è®¿é—®| Mapper
    Mapper -->|æ“ä½œ| Entity
    Entity -->|CRUD| MySQL
    APIController -.->|å¼‚å¸¸| ExceptionHandler
    APIController -.->|æ–‡æ¡£| Swagger
    ArtistNameService -.->|è¾…åŠ©| MusicService
    ArtistNameService -.->|è¾…åŠ©| AlbumService

    style Client fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    style APIController fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    style GlobalAdvice fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    style MusicService fill:#e8f5e9,stroke:#388e3c,stroke-width:2px
    style ArtistService fill:#e8f5e9,stroke:#388e3c,stroke-width:2px
    style AlbumService fill:#e8f5e9,stroke:#388e3c,stroke-width:2px
    style FavoriteService fill:#e8f5e9,stroke:#388e3c,stroke-width:2px
    style AudioService fill:#e8f5e9,stroke:#388e3c,stroke-width:2px
    style Mapper fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style Entity fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style MySQL fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    style ExceptionHandler fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    style Swagger fill:#e0f2f1,stroke:#00796b,stroke-width:2px
    style ArtistNameService fill:#e8f5e9,stroke:#388e3c,stroke-width:2px,dash-array: 5 5
```

### æŠ€æœ¯æ ˆè¯¦æƒ…

| å±‚çº§ | æŠ€æœ¯ç»„ä»¶ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|---------|------|------|
| **è¡¨ç°å±‚** | Spring MVC | 3.1.0 | RESTful API æ§åˆ¶å™¨ |
| **è¡¨ç°å±‚** | SpringDoc OpenAPI | 2.3.0 | è‡ªåŠ¨ç”Ÿæˆ Swagger æ–‡æ¡£ |
| **ä¸šåŠ¡å±‚** | Spring Service | 3.1.0 | ä¸šåŠ¡é€»è¾‘å¤„ç†å’Œäº‹åŠ¡ç®¡ç† |
| **æŒä¹…å±‚** | MyBatis-Plus | 3.5.5 | ORM æ¡†æ¶ï¼Œå¢å¼º MyBatis |
| **æŒä¹…å±‚** | Druid | 1.2.21 | é˜¿é‡Œå·´å·´æ•°æ®åº“è¿æ¥æ±  |
| **æ•°æ®åº“** | MySQL | 8.0+ | å…³ç³»å‹æ•°æ®åº“ |
| **å·¥å…·** | Lombok | - | ç®€åŒ– Java ä»£ç  |
| **å·¥å…·** | FastJson2 | 2.0.43 | JSON å¤„ç† |
| **å·¥å…·** | Validation | - | å‚æ•°æ ¡éªŒ |
| **æµ‹è¯•** | JUnit 5 + Mockito | - | å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯• |

### æ•°æ®æµè®¾è®¡

```
å®¢æˆ·ç«¯è¯·æ±‚ â†’ Controller (æ¥æ”¶è¯·æ±‚ã€å‚æ•°æ ¡éªŒ)
           â†’ GlobalResponseAdvice (ç»Ÿä¸€å“åº”å°è£…)
           â†’ Service (ä¸šåŠ¡é€»è¾‘å¤„ç†)
           â†’ Mapper (MyBatis-Plus æ•°æ®è®¿é—®)
           â†’ MySQL (æ•°æ®åº“æŒä¹…åŒ–)
           â†’ å“åº”è¿”å› (ç»Ÿä¸€Resultæ ¼å¼)
           â†“
å¼‚å¸¸å¤„ç† â†’ GlobalExceptionHandler (æ•è·ã€è®°å½•ã€è¿”å›é”™è¯¯å“åº”)
```

---

## ğŸ“¦ æ¨¡å—ç´¢å¼•

### 1. Controller å±‚ (Web æ§åˆ¶å±‚) âœ…

**è·¯å¾„**: `src/main/java/com/naruto/wangyiyunmusic/controller/`
**èŒè´£**: æ¥æ”¶ HTTP è¯·æ±‚ï¼Œè°ƒç”¨ Service å±‚å¤„ç†ä¸šåŠ¡ï¼Œè¿”å›å“åº”æ•°æ®
**æ–‡ä»¶æ•°é‡**: 10ä¸ª

**ä¸»è¦æ§åˆ¶å™¨**:
- [MusicController.java](src/main/java/com/naruto/wangyiyunmusic/controller/MusicController.java) - éŸ³ä¹ç®¡ç†æ§åˆ¶å™¨
  - `GET /api/music/list` - è·å–éŸ³ä¹åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
  - `GET /api/music/{id}` - è·å–éŸ³ä¹è¯¦æƒ…
- [ArtistController.java](src/main/java/com/naruto/wangyiyunmusic/controller/ArtistController.java) - æ­Œæ‰‹ç®¡ç†æ§åˆ¶å™¨
  - `GET /api/artist/{id}` - è·å–æ­Œæ‰‹è¯¦æƒ…
- [AlbumController.java](src/main/java/com/naruto/wangyiyunmusic/controller/AlbumController.java) - ä¸“è¾‘ç®¡ç†æ§åˆ¶å™¨
  - `GET /api/album/{id}` - è·å–ä¸“è¾‘è¯¦æƒ…
- [FavoriteController.java](src/main/java/com/naruto/wangyiyunmusic/controller/FavoriteController.java) - æ”¶è—ç®¡ç†æ§åˆ¶å™¨
- [PlayRecordController.java](src/main/java/com/naruto/wangyiyunmusic/controller/PlayRecordController.java) - æ’­æ”¾è®°å½•æ§åˆ¶å™¨
- [AudioController.java](src/main/java/com/naruto/wangyiyunmusic/controller/AudioController.java) - éŸ³é¢‘èµ„æºæ§åˆ¶å™¨ â­æ–°å¢
  - `GET /api/audio/{musicId}` - è·å–éŸ³é¢‘è®¿é—®URLï¼ˆæ”¯æŒHTTP Rangeè¯·æ±‚ï¼‰
- å…¶ä»–æ§åˆ¶å™¨ï¼šCategoryController, TagController, MusicArtistController, MusicTagController

---

### 2. Service å±‚ (ä¸šåŠ¡é€»è¾‘å±‚) âœ…

**è·¯å¾„**: `src/main/java/com/naruto/wangyiyunmusic/service/`
**èŒè´£**: å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€å¤„ç†äº‹åŠ¡ç®¡ç†ã€è°ƒç”¨ Mapper å±‚è®¿é—®æ•°æ®
**æ–‡ä»¶æ•°é‡**: 23ä¸ªï¼ˆæ¥å£+å®ç°ï¼‰

**ä¸»è¦æœåŠ¡**:
- [MusicService.java](src/main/java/com/naruto/wangyiyunmusic/service/MusicService.java) - éŸ³ä¹æœåŠ¡æ¥å£
- [MusicServiceImpl.java](src/main/java/com/naruto/wangyiyunmusic/service/impl/MusicServiceImpl.java) - éŸ³ä¹æœåŠ¡å®ç°
- [ArtistService.java](src/main/java/com/naruto/wangyiyunmusic/service/ArtistService.java) - æ­Œæ‰‹æœåŠ¡
- [AlbumService.java](src/main/java/com/naruto/wangyiyunmusic/service/AlbumService.java) - ä¸“è¾‘æœåŠ¡
- [FavoriteService.java](src/main/java/com/naruto/wangyiyunmusic/service/FavoriteService.java) - æ”¶è—æœåŠ¡
- [AudioService.java](src/main/java/com/naruto/wangyiyunmusic/service/AudioService.java) - éŸ³é¢‘æœåŠ¡æ¥å£ â­æ–°å¢
- [AudioServiceImpl.java](src/main/java/com/naruto/wangyiyunmusic/service/impl/AudioServiceImpl.java) - éŸ³é¢‘æœåŠ¡å®ç° â­æ–°å¢
  - å®ç°éŸ³é¢‘URLæ‹¼æ¥é€»è¾‘
  - æ”¯æŒHTTP Rangeè¯·æ±‚ï¼ˆæ‹–æ‹½æ’­æ”¾ï¼‰
  - å¼‚å¸¸å¤„ç†ï¼ˆéŸ³ä¹ä¸å­˜åœ¨ã€æ–‡ä»¶ä¸å­˜åœ¨ï¼‰
- [ArtistNameService.java](src/main/java/com/naruto/wangyiyunmusic/service/ArtistNameService.java) - æ­Œæ‰‹åç§°å¡«å……å…¬å…±æœåŠ¡
  - æ¶ˆé™¤é‡å¤ä»£ç ï¼Œç»Ÿä¸€å¤„ç†æ­Œæ‰‹åç§°å¡«å……é€»è¾‘

---

### 3. Mapper å±‚ (æ•°æ®è®¿é—®å±‚) âœ…

**è·¯å¾„**: `src/main/java/com/naruto/wangyiyunmusic/mapper/`
**èŒè´£**: å°è£…æ•°æ®åº“ CRUD æ“ä½œï¼Œä½¿ç”¨ MyBatis-Plus å¢å¼º
**æŠ€æœ¯**: MyBatis-Plus 3.5.5

**ä¸»è¦ Mapper**:
- [MusicMapper.java](src/main/java/com/naruto/wangyiyunmusic/mapper/MusicMapper.java) - éŸ³ä¹æ•°æ®è®¿é—®
- [ArtistMapper.java](src/main/java/com/naruto/wangyiyunmusic/mapper/ArtistMapper.java) - æ­Œæ‰‹æ•°æ®è®¿é—®
- [AlbumMapper.java](src/main/java/com/naruto/wangyiyunmusic/mapper/AlbumMapper.java) - ä¸“è¾‘æ•°æ®è®¿é—®
- [FavoriteMapper.java](src/main/java/com/naruto/wangyiyunmusic/mapper/FavoriteMapper.java) - æ”¶è—æ•°æ®è®¿é—®
- å…¶ä»– Mapperï¼šCategoryMapper, TagMapper, MusicArtistMapper, MusicTagMapper, PlayRecordMapper

---

### 4. Model å±‚ (æ•°æ®æ¨¡å‹) âœ…

**è·¯å¾„**: `src/main/java/com/naruto/wangyiyunmusic/model/`
**èŒè´£**: å®šä¹‰æ•°æ®åº“å®ä½“ç±»ã€æ•°æ®ä¼ è¾“å¯¹è±¡ã€è§†å›¾å¯¹è±¡

#### 4.1 Entity (å®ä½“ç±»)
**è·¯å¾„**: `model/entity/`
**æ–‡ä»¶æ•°é‡**: 9ä¸ª

**ä¸»è¦å®ä½“**:
- [Music.java](src/main/java/com/naruto/wangyiyunmusic/model/entity/Music.java) - éŸ³ä¹å®ä½“
- [Artist.java](src/main/java/com/naruto/wangyiyunmusic/model/entity/Artist.java) - æ­Œæ‰‹å®ä½“
- [Album.java](src/main/java/com/naruto/wangyiyunmusic/model/entity/Album.java) - ä¸“è¾‘å®ä½“
- [Favorite.java](src/main/java/com/naruto/wangyiyunmusic/model/entity/Favorite.java) - æ”¶è—å®ä½“
- [PlayRecord.java](src/main/java/com/naruto/wangyiyunmusic/model/entity/PlayRecord.java) - æ’­æ”¾è®°å½•å®ä½“
- [Tag.java](src/main/java/com/naruto/wangyiyunmusic/model/entity/Tag.java) - æ ‡ç­¾å®ä½“
- [Category.java](src/main/java/com/naruto/wangyiyunmusic/model/entity/Category.java) - åˆ†ç±»å®ä½“
- [MusicArtist.java](src/main/java/com/naruto/wangyiyunmusic/model/entity/MusicArtist.java) - éŸ³ä¹-æ­Œæ‰‹å…³è”å®ä½“
- [MusicTag.java](src/main/java/com/naruto/wangyiyunmusic/model/entity/MusicTag.java) - éŸ³ä¹-æ ‡ç­¾å…³è”å®ä½“

#### 4.2 VO (è§†å›¾å¯¹è±¡)
**è·¯å¾„**: `model/vo/`

**ä¸»è¦ VO**:
- [MusicListVO.java](src/main/java/com/naruto/wangyiyunmusic/model/vo/MusicListVO.java) - éŸ³ä¹åˆ—è¡¨è§†å›¾å¯¹è±¡
- [MusicDetailVO.java](src/main/java/com/naruto/wangyiyunmusic/model/vo/MusicDetailVO.java) - éŸ³ä¹è¯¦æƒ…è§†å›¾å¯¹è±¡
- [ArtistVO.java](src/main/java/com/naruto/wangyiyunmusic/model/vo/ArtistVO.java) - æ­Œæ‰‹è§†å›¾å¯¹è±¡
- [FavoriteVO.java](src/main/java/com/naruto/wangyiyunmusic/model/vo/FavoriteVO.java) - æ”¶è—è§†å›¾å¯¹è±¡
- [AudioUrlVO.java](src/main/java/com/naruto/wangyiyunmusic/model/vo/AudioUrlVO.java) - éŸ³é¢‘URLè§†å›¾å¯¹è±¡ â­æ–°å¢

#### 4.3 DTO (æ•°æ®ä¼ è¾“å¯¹è±¡)
**è·¯å¾„**: `model/dto/`

**ä¸»è¦ DTO**:
- [MusicQueryDTO.java](src/main/java/com/naruto/wangyiyunmusic/model/dto/MusicQueryDTO.java) - éŸ³ä¹æŸ¥è¯¢å‚æ•°å¯¹è±¡
- [PlayRecordDTO.java](src/main/java/com/naruto/wangyiyunmusic/model/dto/PlayRecordDTO.java) - æ’­æ”¾è®°å½•ä¼ è¾“å¯¹è±¡

---

### 5. Config å±‚ (é…ç½®ç±») âœ…

**è·¯å¾„**: `src/main/java/com/naruto/wangyiyunmusic/config/`
**èŒè´£**: Spring é…ç½®ç±»ã€é™æ€èµ„æºé…ç½®ã€Swaggeré…ç½®

**ä¸»è¦é…ç½®**:
- [MybatisPlusConfig.java](src/main/java/com/naruto/wangyiyunmusic/config/MybatisPlusConfig.java) - MyBatis-Plus é…ç½®
  - åˆ†é¡µæ’ä»¶é…ç½®
  - ä¹è§‚é”æ’ä»¶é…ç½®
- [OpenApiConfig.java](src/main/java/com/naruto/wangyiyunmusic/config/OpenApiConfig.java) - OpenAPI/Swagger é…ç½®
  - API æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ
  - æ¥å£åˆ†ç»„ç®¡ç†
- [WebMvcConfig.java](src/main/java/com/naruto/wangyiyunmusic/config/WebMvcConfig.java) - Web MVC é…ç½®
  - Swagger UI é™æ€èµ„æºæ˜ å°„
  - éŸ³é¢‘æ–‡ä»¶é™æ€èµ„æºæ˜ å°„ â­æ–°å¢
  - æ”¯æŒHTTP Rangeè¯·æ±‚ï¼ˆå®ç°æ‹–æ‹½æ’­æ”¾ï¼‰

---

### 6. Exception å±‚ (å¼‚å¸¸å¤„ç†) âœ…

**è·¯å¾„**: `src/main/java/com/naruto/wangyiyunmusic/exception/`
**èŒè´£**: è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸ã€å…¨å±€å¼‚å¸¸å¤„ç†å™¨ã€ç»Ÿä¸€é”™è¯¯å“åº”

**ä¸»è¦ç±»**:
- [BusinessException.java](src/main/java/com/naruto/wangyiyunmusic/exception/BusinessException.java) - ä¸šåŠ¡å¼‚å¸¸åŸºç±»
- [GlobalExceptionHandler.java](src/main/java/com/naruto/wangyiyunmusic/exception/GlobalExceptionHandler.java) - å…¨å±€å¼‚å¸¸å¤„ç†å™¨
  - ç»Ÿä¸€æ•è·ä¸šåŠ¡å¼‚å¸¸
  - ç»Ÿä¸€è¿”å›é”™è¯¯å“åº”æ ¼å¼
  - è®°å½•å¼‚å¸¸æ—¥å¿—

---

### 7. Common å±‚ (å…¬å…±ç±») âœ…

**è·¯å¾„**: `src/main/java/com/naruto/wangyiyunmusic/common/`
**èŒè´£**: é€šç”¨å·¥å…·ç±»ã€å¸¸é‡å®šä¹‰

**ä¸»è¦ç±»**:
- [Result.java](src/main/java/com/naruto/wangyiyunmusic/common/Result.java) - ç»Ÿä¸€å“åº”å°è£…ç±»
  - code: å“åº”çŠ¶æ€ç 
  - message: å“åº”æ¶ˆæ¯
  - data: å“åº”æ•°æ®

---

### 8. Annotation å±‚ (è‡ªå®šä¹‰æ³¨è§£) âœ…

**è·¯å¾„**: `src/main/java/com/naruto/wangyiyunmusic/annotation/`
**èŒè´£**: è‡ªå®šä¹‰æ³¨è§£ï¼Œç”¨äºAOPæˆ–å‚æ•°æ ¡éªŒ

**ä¸»è¦æ³¨è§£**:
- [IgnoreResponseWrap.java](src/main/java/com/naruto/wangyiyunmusic/annotation/IgnoreResponseWrap.java) - å¿½ç•¥å“åº”å°è£…æ³¨è§£
  - ç”¨äºæ ‡è®°ä¸éœ€è¦ç»Ÿä¸€å“åº”å°è£…çš„æ¥å£

---

### 9. Application å¯åŠ¨ç±» âœ…

**è·¯å¾„**: `src/main/java/com/naruto/wangyiyunmusic/`
**æ–‡ä»¶**: [WangyiyunMusicApplication.java](src/main/java/com/naruto/wangyiyunmusic/WangyiyunMusicApplication.java)
**è¯´æ˜**: Spring Boot åº”ç”¨ä¸»å…¥å£ï¼Œä½¿ç”¨ `@SpringBootApplication` æ³¨è§£

---

### 10. é…ç½®æ–‡ä»¶ âœ…

**è·¯å¾„**: `src/main/resources/`
**æ–‡ä»¶**: [application.yaml](src/main/resources/application.yaml)

**ä¸»è¦é…ç½®é¡¹**:
- æœåŠ¡å™¨ç«¯å£: `8910`
- æ•°æ®åº“è¿æ¥: MySQL (Druidè¿æ¥æ± )
- MyBatis-Plus: åˆ†é¡µæ’ä»¶ã€æ—¥å¿—é…ç½®
- SpringDoc OpenAPI: APIæ–‡æ¡£é…ç½®
- éŸ³é¢‘æ–‡ä»¶é…ç½®: â­æ–°å¢
  - éŸ³é¢‘å­˜å‚¨è·¯å¾„: `file:D:/music-data/audio/`
  - è®¿é—®URLå‰ç¼€: `/audio/`
  - æœåŠ¡å™¨åŸºç¡€URL: `http://localhost:${server.port}`

---

## ğŸ”§ å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼
éµå¾ªã€Šé˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œã€‹è§„èŒƒï¼š
- âœ… ä½¿ç”¨ 4 ä¸ªç©ºæ ¼ç¼©è¿›ï¼Œç¦æ­¢ä½¿ç”¨ Tab
- âœ… å¤§æ‹¬å·ä¸å…³é”®å­—åœ¨åŒä¸€è¡Œ
- âœ… æ–¹æ³•å‚æ•°ã€è¿ç®—ç¬¦ä¸¤ä¾§å¿…é¡»æœ‰ç©ºæ ¼
- âœ… é¿å…è¿‡é•¿çš„æ–¹æ³•ï¼ˆå»ºè®®ä¸è¶…è¿‡ 80 è¡Œï¼‰
- âœ… ä½¿ç”¨ Lombok ç®€åŒ–ä»£ç ï¼ˆ@Data, @Slf4j, @Serviceç­‰ï¼‰

### å‘½åçº¦å®š

| ç±»å‹ | è§„èŒƒ | ç¤ºä¾‹ |
|------|------|------|
| **ç±»å** | å¤§é©¼å³°å‘½å (UpperCamelCase) | `MusicService`, `AudioController` |
| **æ–¹æ³•å** | å°é©¼å³°å‘½å (lowerCamelCase) | `getMusicById()`, `buildAudioUrl()` |
| **å¸¸é‡** | å…¨å¤§å†™ä¸‹åˆ’çº¿åˆ†éš” | `MAX_PAGE_SIZE`, `DEFAULT_TIMEOUT` |
| **åŒ…å** | å…¨å°å†™ | `com.naruto.wangyiyunmusic.service` |
| **å˜é‡** | å°é©¼å³°å‘½å | `musicId`, `audioUrl` |

### åŒ…ç»“æ„è§„èŒƒ
```
com.naruto.wangyiyunmusic
â”œâ”€â”€ annotation      # è‡ªå®šä¹‰æ³¨è§£
â”œâ”€â”€ common         # å…¬å…±ç±»
â”œâ”€â”€ config         # é…ç½®ç±»
â”œâ”€â”€ controller     # æ§åˆ¶å™¨å±‚
â”œâ”€â”€ exception      # å¼‚å¸¸ç±»
â”œâ”€â”€ mapper         # æ•°æ®è®¿é—®å±‚ï¼ˆMyBatis-Plusï¼‰
â”œâ”€â”€ model          # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ entity     # å®ä½“ç±»
â”‚   â”œâ”€â”€ dto        # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â””â”€â”€ vo         # è§†å›¾å¯¹è±¡
â””â”€â”€ service        # ä¸šåŠ¡é€»è¾‘å±‚
    â””â”€â”€ impl       # å®ç°ç±»
```

### æ³¨é‡Šè§„èŒƒ
- âœ… **ä½¿ç”¨ä¸­æ–‡æ³¨é‡Š** (é¡¹ç›®å›¢é˜Ÿç»Ÿä¸€ä½¿ç”¨ä¸­æ–‡)
- âœ… æ‰€æœ‰ç±»å¿…é¡»æœ‰ç±»çº§åˆ«æ³¨é‡Š (åŒ…å«ä½œè€…ã€åˆ›å»ºæ—¶é—´ã€åŠŸèƒ½è¯´æ˜)
- âœ… å…¬å…±æ–¹æ³•å¿…é¡»æœ‰æ–¹æ³•æ³¨é‡Š (åŒ…å«å‚æ•°è¯´æ˜ã€è¿”å›å€¼è¯´æ˜)
- âœ… å¤æ‚é€»è¾‘å¿…é¡»æœ‰è¡Œå†…æ³¨é‡Š

**ç±»æ³¨é‡Šæ¨¡æ¿**:
```java
/**
 * éŸ³é¢‘æœåŠ¡å®ç°ç±»
 *
 * <p>å¤„ç†éŸ³é¢‘æ–‡ä»¶URLè·å–ç›¸å…³ä¸šåŠ¡é€»è¾‘</p>
 *
 * @Author: naruto
 * @CreateTime: 2026-01-28
 */
@Slf4j
@Service
public class AudioServiceImpl implements AudioService {
    // ...
}
```

**æ–¹æ³•æ³¨é‡Šæ¨¡æ¿**:
```java
/**
 * æ ¹æ®éŸ³ä¹IDè·å–éŸ³é¢‘è®¿é—®URL
 *
 * @param musicId éŸ³ä¹ID
 * @return éŸ³é¢‘URLä¿¡æ¯
 */
@Override
public AudioUrlVO getAudioUrl(Long musicId) {
    // ...
}
```

### RESTful API è®¾è®¡è§„èŒƒ

| æ“ä½œ | HTTP æ–¹æ³• | è·¯å¾„ç¤ºä¾‹ | è¯´æ˜ |
|------|----------|---------|------|
| æŸ¥è¯¢åˆ—è¡¨ | GET | `/api/music/list` | è·å–éŸ³ä¹åˆ—è¡¨ |
| æŸ¥è¯¢å•ä¸ª | GET | `/api/music/{id}` | è·å–éŸ³ä¹è¯¦æƒ… |
| åˆ›å»º | POST | `/api/favorite` | æ·»åŠ æ”¶è— |
| æ›´æ–° | PUT | `/api/music/{id}` | æ›´æ–°éŸ³ä¹ä¿¡æ¯ |
| åˆ é™¤ | DELETE | `/api/favorite/{id}` | å–æ¶ˆæ”¶è— |

**å“åº”æ ¼å¼**ï¼ˆç»Ÿä¸€ Result å°è£…ï¼‰:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": { ... }
}
```

**é”™è¯¯å“åº”æ ¼å¼**:
```json
{
  "code": 500,
  "message": "éŸ³ä¹ä¸å­˜åœ¨ï¼ŒID: 1",
  "data": null
}
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- â˜‘ï¸ **JDK**: 17 æˆ–æ›´é«˜ç‰ˆæœ¬
- â˜‘ï¸ **Maven**: 3.6+
- â˜‘ï¸ **MySQL**: 8.0+
- â˜‘ï¸ **IDE**: IntelliJ IDEA (æ¨èï¼Œå·²é…ç½® Lombok æ’ä»¶)

### å®‰è£…ä¾èµ–
```bash
mvn clean install
```

### æ„å»ºå‘½ä»¤
```bash
# ç¼–è¯‘é¡¹ç›®
mvn clean compile

# æ‰“åŒ…é¡¹ç›®
mvn clean package

# è·³è¿‡æµ‹è¯•æ‰“åŒ…
mvn clean package -DskipTests
```

### è¿è¡Œå‘½ä»¤

**æ–¹å¼ 1: Maven å‘½ä»¤è¿è¡Œ**
```bash
mvn spring-boot:run
```

**æ–¹å¼ 2: JAR åŒ…è¿è¡Œ**
```bash
java -jar target/wangyiyun-music-0.0.1-SNAPSHOT.jar
```

**æ–¹å¼ 3: IDE è¿è¡Œ**
- åœ¨ IntelliJ IDEA ä¸­æ‰¾åˆ° `WangyiyunMusicApplication.java`
- å³é”® â†’ Run 'WangyiyunMusicApplication'

### æµ‹è¯•å‘½ä»¤
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
mvn test

# è¿è¡Œå•ä¸ªæµ‹è¯•ç±»
mvn test -Dtest=MusicServiceTest

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
mvn clean test jacoco:report
```

### è®¿é—®åº”ç”¨
- **åº”ç”¨ç«¯å£**: http://localhost:8910
- **Swagger API æ–‡æ¡£**: http://localhost:8910/swagger-ui/index.html
- **API æ–‡æ¡£ JSON**: http://localhost:8910/v3/api-docs

---

## ğŸ“š ä¾èµ–ç®¡ç†

### æ ¸å¿ƒä¾èµ–è¯´æ˜

| ä¾èµ– | ç‰ˆæœ¬ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|------|
| **spring-boot-starter-web** | 3.1.0 | Web åº”ç”¨å¼€å‘ï¼ŒåŒ…å« Spring MVC | âœ… å·²é›†æˆ |
| **mybatis-plus-boot-starter** | 3.5.5 | MyBatis-Plus æ ¸å¿ƒåº“ | âœ… å·²é›†æˆ |
| **druid-spring-boot-starter** | 1.2.21 | é˜¿é‡Œå·´å·´æ•°æ®åº“è¿æ¥æ±  | âœ… å·²é›†æˆ |
| **mysql-connector-j** | runtime | MySQL æ•°æ®åº“é©±åŠ¨ | âœ… å·²é›†æˆ |
| **springdoc-openapi-starter-webmvc-ui** | 2.3.0 | Swagger API æ–‡æ¡£ç”Ÿæˆ | âœ… å·²é›†æˆ |
| **lombok** | - | ç®€åŒ– Java ä»£ç  | âœ… å·²é›†æˆ |
| **spring-boot-starter-validation** | - | å‚æ•°æ ¡éªŒ | âœ… å·²é›†æˆ |
| **fastjson2** | 2.0.43 | JSON å¤„ç† | âœ… å·²é›†æˆ |
| **spring-boot-starter-test** | 3.1.0 | æµ‹è¯•æ¡†æ¶ï¼ŒåŒ…å« JUnit 5ã€Mockito | âœ… å·²é›†æˆ |

### å¾…é›†æˆä¾èµ–

ä»¥ä¸‹ä¾èµ–å¯æ ¹æ®éœ€è¦åœ¨åç»­å¼€å‘ä¸­é›†æˆï¼š

```xml
<!-- Spring Security - è®¤è¯æˆæƒ -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-security</artifactId>
</dependency>

<!-- Redis - ç¼“å­˜ -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
</dependency>

<!-- Spring Boot Actuator - å¥åº·æ£€æŸ¥ -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-actuator</artifactId>
</dependency>
```

### ç‰ˆæœ¬ç®¡ç†ç­–ç•¥
- âœ… ä½¿ç”¨ Spring Boot çš„ä¾èµ–ç®¡ç†æœºåˆ¶ (`spring-boot-dependencies`)
- âœ… é”å®šä¸»è¦ä¾èµ–çš„ç‰ˆæœ¬å·ï¼Œé¿å…æ„å¤–å‡çº§
- âœ… å®šæœŸæ£€æŸ¥ä¾èµ–å®‰å…¨æ¼æ´ (`mvn dependency:tree`)
- âœ… ä¼˜å…ˆä½¿ç”¨ Spring Boot å®˜æ–¹ Starter

---

## ğŸ“– å¼€å‘æŒ‡å—

### æ•°æ®åº“é…ç½®
åœ¨ `application.yaml` ä¸­å·²é…ç½® MySQL è¿æ¥ï¼š

```yaml
spring:
  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/wangyiyun_music?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
    username: root
    password: your_password
```

### éŸ³é¢‘æ–‡ä»¶é…ç½® â­æ–°å¢
```yaml
audio:
  # éŸ³é¢‘æ–‡ä»¶å­˜å‚¨çš„ç‰©ç†è·¯å¾„
  storage-path: file:D:/music-data/audio/
  # è®¿é—®URLå‰ç¼€
  url-prefix: /audio/
  # æœåŠ¡å™¨åŸºç¡€URL
  server-base-url: http://localhost:${server.port}
```

### å¼€å‘å·¥ä½œæµ
1. **åˆ›å»ºåˆ†æ”¯**: `git checkout -b feature/your-feature`
2. **ç¼–å†™ä»£ç **: éµå¾ªå¼€å‘è§„èŒƒå’Œåˆ†å±‚æ¶æ„
3. **ç¼–å†™æµ‹è¯•**: ç¡®ä¿æµ‹è¯•è¦†ç›–ç‡ > 80%
4. **æœ¬åœ°éªŒè¯**: `mvn clean test`
5. **æäº¤ä»£ç **: `git commit -m "feat: æ·»åŠ XXXåŠŸèƒ½"`
6. **æ¨é€åˆ†æ”¯**: `git push origin feature/your-feature`
7. **åˆ›å»º PR**: ç­‰å¾…ä»£ç å®¡æŸ¥

### æ—¥å¿—è§„èŒƒ
ä½¿ç”¨ SLF4J + Logback è®°å½•æ—¥å¿—ï¼š

```java
import lombok.extern.slf4j.Slf4j;

@Slf4j
@Service
public class AudioServiceImpl implements AudioService {
    public AudioUrlVO getAudioUrl(Long musicId) {
        log.info("è·å–éŸ³é¢‘URLè¯·æ±‚, musicId: {}", musicId);

        // ä¸šåŠ¡é€»è¾‘

        log.info("éŸ³é¢‘URLç”ŸæˆæˆåŠŸ, musicId: {}, audioUrl: {}", musicId, audioUrl);
        return vo;
    }
}
```

### API æ–‡æ¡£è®¿é—®
å¯åŠ¨åº”ç”¨åï¼Œè®¿é—® Swagger UI æŸ¥çœ‹æ‰€æœ‰æ¥å£æ–‡æ¡£ï¼š
- **Swagger UI**: http://localhost:8910/swagger-ui/index.html
- **æ¥å£æµ‹è¯•**: å¯ç›´æ¥åœ¨ Swagger UI ä¸­æµ‹è¯•æ¥å£
- **æ¥å£è¯´æ˜**: æ¯ä¸ªæ¥å£éƒ½æœ‰å®Œæ•´çš„å‚æ•°è¯´æ˜å’Œç¤ºä¾‹

---

## ğŸ” é¡¹ç›®å…ƒæ•°æ®

- **ä»“åº“åœ°å€**: (å¾…æ·»åŠ )
- **æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2026-01-30 00:01:24
- **æœ€åæ›´æ–°**: 2026-01-30
- **ç»´æŠ¤è€…**: naruto
- **è®¸å¯è¯**: (å¾…å®šä¹‰)
- **Java æ–‡ä»¶æ€»æ•°**: 67ä¸ª
- **æ§åˆ¶å™¨æ•°é‡**: 10ä¸ª
- **æœåŠ¡ç±»æ•°é‡**: 23ä¸ª
- **å®ä½“ç±»æ•°é‡**: 9ä¸ª

---

## ğŸ“Œ ç›¸å…³é“¾æ¥

- [Spring Boot å®˜æ–¹æ–‡æ¡£](https://spring.io/projects/spring-boot)
- [MyBatis-Plus å®˜æ–¹æ–‡æ¡£](https://baomidou.com/)
- [SpringDoc OpenAPI æ–‡æ¡£](https://springdoc.org/)
- [é˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œ](https://github.com/alibaba/p3c)
- [MySQL å®˜æ–¹æ–‡æ¡£](https://dev.mysql.com/doc/)
- [Maven å®˜æ–¹æ–‡æ¡£](https://maven.apache.org/guides/)
- [Druid å®˜æ–¹æ–‡æ¡£](https://github.com/alibaba/druid)

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### 2026-01-30
- âœ… å¢é‡æ›´æ–°é¡¹ç›® AI ä¸Šä¸‹æ–‡æ–‡æ¡£
- âœ… æ·»åŠ éŸ³é¢‘æ–‡ä»¶URLæ˜ å°„æ¨¡å—æ–‡æ¡£
- âœ… ç”Ÿæˆè¯¦ç»†çš„ç³»ç»Ÿæ¶æ„å›¾ï¼ˆMermaidï¼‰
- âœ… æ›´æ–°æŠ€æœ¯æ ˆä¿¡æ¯ï¼ˆåæ˜ å·²é›†æˆä¾èµ–ï¼‰
- âœ… æ›´æ–°æ¨¡å—ç´¢å¼•ï¼ˆåæ˜ å®é™…å®ç°çŠ¶æ€ï¼‰
- âœ… æ·»åŠ ä»£ç ä¼˜åŒ–ç¤ºä¾‹ï¼ˆæ­Œæ‰‹åç§°å¡«å……æœåŠ¡ï¼‰

### 2026-01-28
- âœ… å®ç°éŸ³é¢‘æ–‡ä»¶URLæ˜ å°„æ¥å£åŠŸèƒ½
- âœ… é…ç½®éŸ³é¢‘é™æ€èµ„æºæ˜ å°„ï¼ˆæ”¯æŒHTTP Rangeè¯·æ±‚ï¼‰
- âœ… æ·»åŠ éŸ³é¢‘æœåŠ¡å±‚å’Œæ§åˆ¶å™¨

### 2026-01-24
- âœ… åˆå§‹åŒ–é¡¹ç›® AI ä¸Šä¸‹æ–‡æ–‡æ¡£
- âœ… åˆ›å»ºé¡¹ç›®åŸºç¡€æ¶æ„
- âœ… æ·»åŠ æµ‹è¯•æ§åˆ¶å™¨
- âœ… é…ç½®æœåŠ¡å™¨ç«¯å£ 8910

---

**è¯´æ˜**: æœ¬æ–‡æ¡£ç”± AI è‡ªåŠ¨ç”Ÿæˆå¹¶å¢é‡æ›´æ–°ï¼Œç”¨äºè¾…åŠ©é¡¹ç›®å¼€å‘å’Œä»£ç ç†è§£ã€‚éšç€é¡¹ç›®å‘å±•ï¼Œè¯·åŠæ—¶æ›´æ–°æœ¬æ–‡æ¡£ã€‚
